# Бот для Fantasy Hockey

Этот бот собирает ежедневную статистику NHL Fantasy из лиги ESPN Fantasy Hockey и создает "Команду дня" - лучших игроков на каждой позиции. Результаты отправляются в Telegram-канал с коллажами игроков и статистикой.

## Возможности

- Ежедневный сбор статистики игроков из ESPN Fantasy Hockey
- Создание "Команды дня" с лучшими игроками на каждой позиции:
  - 1 Центральный нападающий (C)
  - 1 Левый крайний нападающий (LW)
  - 1 Правый крайний нападающий (RW)
  - 2 Защитника (D)
  - 1 Вратарь (G)
- Система оценки игроков на основе частоты появления в Команде дня:
  - обычный: 1 появление
  - необычный: 2 появления
  - редкий: 3 появления
  - эпический: 4 появления
  - легендарный: 5+ появлений
- Отправка результатов в Telegram-канал с коллажами фотографий игроков и статистикой

## Требования

- Python 3.8+
- Необходимые Python-пакеты (установка через pip):
  ```
  python-telegram-bot
  requests
  Pillow
  python-dotenv
  pytz
  ```

## Настройка

1. Клонируйте репозиторий
2. Установите необходимые пакеты:
```bash
pip install -r requirements.txt
```
3. Создайте файл `.env` в корне проекта с вашими учетными данными Telegram:
```
TELEGRAM_TOKEN=ваш_токен_бота
CHAT_ID=ваш_идентификатор_чата
```

## Использование

Бот может собирать данные за различные периоды времени:

### Текущая неделя
Для сбора данных за текущую неделю (вторник-понедельник):
```bash
python app_day.py
```

### Предыдущая неделя
Для сбора данных за предыдущую неделю:
```bash
python app_day.py --previous-week
```

### Все недели
Для сбора данных за все недели с начала сезона:
```bash
python app_day.py --all-weeks
```

## Хранение данных

- Статистика и оценки игроков хранятся в `player_stats.json`
- Ежедневные коллажи сохраняются как временные файлы и удаляются после отправки
- Логи записываются в `log.txt`

## Структура проекта

- `app_day.py` - Основной файл приложения с логикой сбора и обработки данных
- `player_stats.json` - Хранилище статистики и оценок игроков
- `log.txt` - Логи приложения
- `.env` - Переменные окружения (учетные данные Telegram)

## Примечания

- Бот использует API ESPN Fantasy Hockey для сбора данных
- Дата начала сезона установлена на 4 октября 2024 года
- Сбор данных выполняется по восточному времени (ET) для соответствия расписанию ESPN
- Фотографии игроков загружаются из CDN ESPN
- Коллажи создаются с использованием библиотеки Pillow
- Сообщения отправляются в Telegram с помощью библиотеки python-telegram-bot
