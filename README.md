# Fantasy Hockey Bot

Телеграм-бот для отслеживания статистики фэнтези-хоккея. Бот собирает данные о лучших игроках дня и недели, создает коллажи с их фотографиями и отправляет в Telegram.

## Основные функции

- Ежедневные отчеты о лучших игроках
- Еженедельные сводки команд
- Автоматическое определение дат недели (понедельник-воскресенье)
- Кэширование изображений игроков для оптимизации производительности
- Система грейдов игроков на основе частоты попадания в команду дня

## Структура проекта

```
fantasy-hockey-bot/
├── data/
│   ├── cache/              # Кэшированные изображения игроков
│   ├── processed/          # Обработанные данные статистики
│   └── temp/              # Временные файлы (коллажи)
├── logs/                  # Логи приложения
├── scripts/
│   ├── app_day.py        # Скрипт обработки дневной статистики
│   └── app_week.py       # Скрипт обработки недельной статистики
└── src/
    ├── config/           # Конфигурационные файлы
    └── utils/            # Вспомогательные функции
```

## Использование

### Дневная статистика (app_day.py)

- Без флагов: обработка последнего дня
```bash
python3 scripts/app_day.py
```

- Обработка всех дней с начала сезона:
```bash
python3 scripts/app_day.py --all-weeks
```

- Принудительный пересчет статистики:
```bash
python3 scripts/app_day.py --force
```

### Недельная статистика (app_week.py)

- Без флагов: обработка последней завершенной недели
```bash
python3 scripts/app_week.py
```

- Обработка всех недель с начала сезона:
```bash
python3 scripts/app_week.py --all-weeks
```

## Последние изменения

- Добавлено кэширование изображений игроков для ускорения работы
- Исправлен расчет дат недели (теперь корректно с понедельника по воскресенье)
- Улучшена система логирования
- Оптимизирована структура проекта (удален избыточный файл collect_daily_stats.py)
- Добавлены флаги для гибкого управления обработкой данных
- Реализована система грейдов игроков

## Требования

- Python 3.8+
- Необходимые библиотеки указаны в requirements.txt
- Telegram Bot API Token
