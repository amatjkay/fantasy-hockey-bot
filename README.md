# Fantasy Hockey Bot

Телеграм бот для отслеживания статистики фэнтези-хоккея. Бот собирает данные о результатах игроков и отправляет ежедневные и еженедельные отчеты в формате коллажей.

## Основные функции

- Ежедневные отчеты о лучших игроках (`app_day.py`)
- Еженедельные отчеты о лучших игроках (`app_week.py`)
- Кэширование изображений игроков для оптимизации производительности
- Автоматическое определение дат недели (понедельник-воскресенье)

## Структура проекта

```
fantasy-hockey-bot/
├── scripts/
│   ├── app_day.py      # Скрипт для ежедневных отчетов
│   └── app_week.py     # Скрипт для еженедельных отчетов
├── src/
│   ├── config/         # Конфигурационные файлы
│   └── utils/          # Вспомогательные функции
├── data/
│   ├── cache/          # Кэш изображений игроков
│   └── temp/           # Временные файлы
└── logs/               # Логи приложения
```

## Последние изменения

1. Оптимизация обработки данных:
   - Удален избыточный файл `collect_daily_stats.py`
   - Добавлено кэширование изображений игроков
   - Улучшена обработка ошибок и повторных попыток

2. Исправление дат недели:
   - Корректный расчет дат недели (понедельник-воскресенье)
   - Улучшенное форматирование дат в отчетах

3. Улучшение логирования:
   - Добавлен вывод в консоль
   - Подробные логи инициализации и выполнения

## Запуск скриптов

### Ежедневный отчет
```bash
python3 scripts/app_day.py [--all-weeks] [--force]
```
- `--all-weeks`: обработка всех недель с начала сезона
- `--force`: принудительная обработка всех дат, даже если они уже были обработаны

### Еженедельный отчет
```bash
python3 scripts/app_week.py [--all-weeks]
```
- `--all-weeks`: обработка всех недель с начала сезона
